<?xml version='1.0' encoding='UTF-8'?>
<odoo>
    <record id="view_move_form" model="ir.ui.view">
        <field name="name">account.move.form.inherit</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='ref']" position="after">
                <field
                    name="l10n_ve_control_number"
                    invisible="context.get('default_move_type') not in ('out_invoice', 'out_refund','out_receipt')"
                    readonly="1"
                    string="Control Number"
                    />
                <field
                    name="l10n_ve_control_number"
                    invisible="context.get('default_move_type') not in ('in_invoice', 'in_refund','in_receipt')"
                    readonly="state != 'draft'"
                    string="Control Number"
                    />
            </xpath>
            <xpath expr="//notebook" position="inside">
                <page name="withholdings_page" string="Retenciones" invisible="move_type not in ('in_invoice','in_refund','out_invoice','out_refund')">
                    <field name="l10n_ve_withholding_ids" nolabel="1" colspan="2" readonly="1">
                        <list>
                            <field name="l10n_ve_tax_type" invisible="1"/>
                            <field name="withholding_sequence_id" column_invisible="True"/>
                            <field name="company_id" column_invisible="True"/>
                            <field name="currency_id" column_invisible="True"/>
                            <field name="tax_id" domain="[('l10n_ve_withholding_payment_type', '=', parent.move_type in ('in_invoice','in_refund') and 'supplier' or 'customer'), ('company_id', 'parent_of', parent.company_id)]" options="{'no_create': True}"/>
                            <field name="name" readonly="withholding_sequence_id"/>
                            <field name="base_amount" column_invisible="parent.move_type in ('in_invoice','in_refund')" optional="hide"/>
                            <field name="base_amount" column_invisible="parent.move_type not in ('in_invoice','in_refund')"/>
                            <field name="amount" readonly="1" force_save="1"/>
                            <field name="ref" optional="hide"/>
                            <button name="%(action_report_withholding_certificate_iva)d" invisible="l10n_ve_tax_type != 'partner_tax'" type="action" string="Imprimir comprobante IVA" icon="fa-print" />
                            <button name="%(action_report_withholding_certificate)d" invisible="l10n_ve_tax_type != 'tabla_islr'" icon="fa-print " title="Imprimir comprobante ISLR" type="action" />
                        </list>
                    </field>
                </page>
            </xpath>
        </field>
    </record>

</odoo>
